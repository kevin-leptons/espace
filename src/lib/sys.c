#include <espace/sys.h>
#include <stdlib.h>
#include <signal.h>

#define _SYS_ERRDEF(err_name) ESPACE_ERRDEF(SYS_##err_name)
#define _SYS_ERRREF(err_name) &_SYS_##err_name

_SYS_ERRDEF(EPERM)
_SYS_ERRDEF(ENOENT)
_SYS_ERRDEF(ESRCH)
_SYS_ERRDEF(EINTR)
_SYS_ERRDEF(EIO)
_SYS_ERRDEF(ENXIO)
_SYS_ERRDEF(E2BIG)
_SYS_ERRDEF(ENOEXEC)
_SYS_ERRDEF(EBADF)
_SYS_ERRDEF(ECHILD)
_SYS_ERRDEF(EAGAIN)
_SYS_ERRDEF(ENOMEM)
_SYS_ERRDEF(EACCES)
_SYS_ERRDEF(EFAULT)
_SYS_ERRDEF(ENOTBLK)
_SYS_ERRDEF(EBUSY)
_SYS_ERRDEF(EEXIST)
_SYS_ERRDEF(EXDEV)
_SYS_ERRDEF(ENODEV)
_SYS_ERRDEF(ENOTDIR)
_SYS_ERRDEF(EISDIR)
_SYS_ERRDEF(EINVAL)
_SYS_ERRDEF(ENFILE)
_SYS_ERRDEF(EMFILE)
_SYS_ERRDEF(ENOTTY)
_SYS_ERRDEF(ETXTBSY)
_SYS_ERRDEF(EFBIG)
_SYS_ERRDEF(ENOSPC)
_SYS_ERRDEF(ESPIPE)
_SYS_ERRDEF(EROFS)
_SYS_ERRDEF(EMLINK)
_SYS_ERRDEF(EPIPE)
_SYS_ERRDEF(EDOM)
_SYS_ERRDEF(ERANGE)
_SYS_ERRDEF(EDEADLK)
_SYS_ERRDEF(ENAMETOOLONG)
_SYS_ERRDEF(ENOLCK)
_SYS_ERRDEF(ENOSYS)
_SYS_ERRDEF(ENOTEMPTY)
_SYS_ERRDEF(ELOOP)
_SYS_ERRDEF(EWOULDBLOCK)
_SYS_ERRDEF(ENOMSG)
_SYS_ERRDEF(EIDRM)
_SYS_ERRDEF(ECHRNG)
_SYS_ERRDEF(EL2NSYNC)
_SYS_ERRDEF(EL3HLT)
_SYS_ERRDEF(EL3RST)
_SYS_ERRDEF(ELNRNG)
_SYS_ERRDEF(EUNATCH)
_SYS_ERRDEF(ENOCSI)
_SYS_ERRDEF(EL2HLT)
_SYS_ERRDEF(EBADE)
_SYS_ERRDEF(EBADR)
_SYS_ERRDEF(EXFULL)
_SYS_ERRDEF(ENOANO)
_SYS_ERRDEF(EBADRQC)
_SYS_ERRDEF(EBADSLT)
_SYS_ERRDEF(EDEADLOCK)
_SYS_ERRDEF(EBFONT)
_SYS_ERRDEF(ENOSTR)
_SYS_ERRDEF(ENODATA)
_SYS_ERRDEF(ETIME)
_SYS_ERRDEF(ENOSR)
_SYS_ERRDEF(ENONET)
_SYS_ERRDEF(ENOPKG)
_SYS_ERRDEF(EREMOTE)
_SYS_ERRDEF(ENOLINK)
_SYS_ERRDEF(EADV)
_SYS_ERRDEF(ESRMNT)
_SYS_ERRDEF(ECOMM)
_SYS_ERRDEF(EPROTO)
_SYS_ERRDEF(EMULTIHOP)
_SYS_ERRDEF(EDOTDOT)
_SYS_ERRDEF(EBADMSG)
_SYS_ERRDEF(EOVERFLOW)
_SYS_ERRDEF(ENOTUNIQ)
_SYS_ERRDEF(EBADFD)
_SYS_ERRDEF(EREMCHG)
_SYS_ERRDEF(ELIBACC)
_SYS_ERRDEF(ELIBBAD)
_SYS_ERRDEF(ELIBSCN)
_SYS_ERRDEF(ELIBMAX)
_SYS_ERRDEF(ELIBEXEC)
_SYS_ERRDEF(EILSEQ)
_SYS_ERRDEF(ERESTART)
_SYS_ERRDEF(ESTRPIPE)
_SYS_ERRDEF(EUSERS)
_SYS_ERRDEF(ENOTSOCK)
_SYS_ERRDEF(EDESTADDRREQ)
_SYS_ERRDEF(EMSGSIZE)
_SYS_ERRDEF(EPROTOTYPE)
_SYS_ERRDEF(ENOPROTOOPT)
_SYS_ERRDEF(EPROTONOSUPPORT)
_SYS_ERRDEF(ESOCKTNOSUPPORT)
_SYS_ERRDEF(EOPNOTSUPP)
_SYS_ERRDEF(EPFNOSUPPORT)
_SYS_ERRDEF(EAFNOSUPPORT)
_SYS_ERRDEF(EADDRINUSE)
_SYS_ERRDEF(EADDRNOTAVAIL)
_SYS_ERRDEF(ENETDOWN)
_SYS_ERRDEF(ENETUNREACH)
_SYS_ERRDEF(ENETRESET)
_SYS_ERRDEF(ECONNABORTED)
_SYS_ERRDEF(ECONNRESET)
_SYS_ERRDEF(ENOBUFS)
_SYS_ERRDEF(EISCONN)
_SYS_ERRDEF(ENOTCONN)
_SYS_ERRDEF(ESHUTDOWN)
_SYS_ERRDEF(ETOOMANYREFS)
_SYS_ERRDEF(ETIMEDOUT)
_SYS_ERRDEF(ECONNREFUSED)
_SYS_ERRDEF(EHOSTDOWN)
_SYS_ERRDEF(EHOSTUNREACH)
_SYS_ERRDEF(EALREADY)
_SYS_ERRDEF(EINPROGRESS)
_SYS_ERRDEF(ESTALE)
_SYS_ERRDEF(EUCLEAN)
_SYS_ERRDEF(ENOTNAM)
_SYS_ERRDEF(ENAVAIL)
_SYS_ERRDEF(EISNAM)
_SYS_ERRDEF(EREMOTEIO)
_SYS_ERRDEF(EDQUOT)
_SYS_ERRDEF(ENOMEDIUM)
_SYS_ERRDEF(EMEDIUMTYPE)
_SYS_ERRDEF(ECANCELED)
_SYS_ERRDEF(ENOKEY)
_SYS_ERRDEF(EKEYEXPIRED)
_SYS_ERRDEF(EKEYREVOKED)
_SYS_ERRDEF(EKEYREJECTED)
_SYS_ERRDEF(EOWNERDEAD)
_SYS_ERRDEF(ENOTRECOVERABLE)
_SYS_ERRDEF(ERFKILL)
_SYS_ERRDEF(EHWPOISON)

#define _SYS_ERRSIZE 133
const struct espace_error * const _SYS_ERR[_SYS_ERRSIZE] = {
    _SYS_ERRREF(EPERM),
    _SYS_ERRREF(ENOENT),
    _SYS_ERRREF(ESRCH),
    _SYS_ERRREF(EINTR),
    _SYS_ERRREF(EIO),
    _SYS_ERRREF(ENXIO),
    _SYS_ERRREF(E2BIG),
    _SYS_ERRREF(ENOEXEC),
    _SYS_ERRREF(EBADF),
    _SYS_ERRREF(ECHILD),
    _SYS_ERRREF(EAGAIN),
    _SYS_ERRREF(ENOMEM),
    _SYS_ERRREF(EACCES),
    _SYS_ERRREF(EFAULT),
    _SYS_ERRREF(ENOTBLK),
    _SYS_ERRREF(EBUSY),
    _SYS_ERRREF(EEXIST),
    _SYS_ERRREF(EXDEV),
    _SYS_ERRREF(ENODEV),
    _SYS_ERRREF(ENOTDIR),
    _SYS_ERRREF(EISDIR),
    _SYS_ERRREF(EINVAL),
    _SYS_ERRREF(ENFILE),
    _SYS_ERRREF(EMFILE),
    _SYS_ERRREF(ENOTTY),
    _SYS_ERRREF(ETXTBSY),
    _SYS_ERRREF(EFBIG),
    _SYS_ERRREF(ENOSPC),
    _SYS_ERRREF(ESPIPE),
    _SYS_ERRREF(EROFS),
    _SYS_ERRREF(EMLINK),
    _SYS_ERRREF(EPIPE),
    _SYS_ERRREF(EDOM),
    _SYS_ERRREF(ERANGE),
    _SYS_ERRREF(EDEADLK),
    _SYS_ERRREF(ENAMETOOLONG),
    _SYS_ERRREF(ENOLCK),
    _SYS_ERRREF(ENOSYS),
    _SYS_ERRREF(ENOTEMPTY),
    _SYS_ERRREF(ELOOP),
    _SYS_ERRREF(EWOULDBLOCK),
    _SYS_ERRREF(ENOMSG),
    _SYS_ERRREF(EIDRM),
    _SYS_ERRREF(ECHRNG),
    _SYS_ERRREF(EL2NSYNC),
    _SYS_ERRREF(EL3HLT),
    _SYS_ERRREF(EL3RST),
    _SYS_ERRREF(ELNRNG),
    _SYS_ERRREF(EUNATCH),
    _SYS_ERRREF(ENOCSI),
    _SYS_ERRREF(EL2HLT),
    _SYS_ERRREF(EBADE),
    _SYS_ERRREF(EBADR),
    _SYS_ERRREF(EXFULL),
    _SYS_ERRREF(ENOANO),
    _SYS_ERRREF(EBADRQC),
    _SYS_ERRREF(EBADSLT),
    _SYS_ERRREF(EDEADLOCK),
    _SYS_ERRREF(EBFONT),
    _SYS_ERRREF(ENOSTR),
    _SYS_ERRREF(ENODATA),
    _SYS_ERRREF(ETIME),
    _SYS_ERRREF(ENOSR),
    _SYS_ERRREF(ENONET),
    _SYS_ERRREF(ENOPKG),
    _SYS_ERRREF(EREMOTE),
    _SYS_ERRREF(ENOLINK),
    _SYS_ERRREF(EADV),
    _SYS_ERRREF(ESRMNT),
    _SYS_ERRREF(ECOMM),
    _SYS_ERRREF(EPROTO),
    _SYS_ERRREF(EMULTIHOP),
    _SYS_ERRREF(EDOTDOT),
    _SYS_ERRREF(EBADMSG),
    _SYS_ERRREF(EOVERFLOW),
    _SYS_ERRREF(ENOTUNIQ),
    _SYS_ERRREF(EBADFD),
    _SYS_ERRREF(EREMCHG),
    _SYS_ERRREF(ELIBACC),
    _SYS_ERRREF(ELIBBAD),
    _SYS_ERRREF(ELIBSCN),
    _SYS_ERRREF(ELIBMAX),
    _SYS_ERRREF(ELIBEXEC),
    _SYS_ERRREF(EILSEQ),
    _SYS_ERRREF(ERESTART),
    _SYS_ERRREF(ESTRPIPE),
    _SYS_ERRREF(EUSERS),
    _SYS_ERRREF(ENOTSOCK),
    _SYS_ERRREF(EDESTADDRREQ),
    _SYS_ERRREF(EMSGSIZE),
    _SYS_ERRREF(EPROTOTYPE),
    _SYS_ERRREF(ENOPROTOOPT),
    _SYS_ERRREF(EPROTONOSUPPORT),
    _SYS_ERRREF(ESOCKTNOSUPPORT),
    _SYS_ERRREF(EOPNOTSUPP),
    _SYS_ERRREF(EPFNOSUPPORT),
    _SYS_ERRREF(EAFNOSUPPORT),
    _SYS_ERRREF(EADDRINUSE),
    _SYS_ERRREF(EADDRNOTAVAIL),
    _SYS_ERRREF(ENETDOWN),
    _SYS_ERRREF(ENETUNREACH),
    _SYS_ERRREF(ENETRESET),
    _SYS_ERRREF(ECONNABORTED),
    _SYS_ERRREF(ECONNRESET),
    _SYS_ERRREF(ENOBUFS),
    _SYS_ERRREF(EISCONN),
    _SYS_ERRREF(ENOTCONN),
    _SYS_ERRREF(ESHUTDOWN),
    _SYS_ERRREF(ETOOMANYREFS),
    _SYS_ERRREF(ETIMEDOUT),
    _SYS_ERRREF(ECONNREFUSED),
    _SYS_ERRREF(EHOSTDOWN),
    _SYS_ERRREF(EHOSTUNREACH),
    _SYS_ERRREF(EALREADY),
    _SYS_ERRREF(EINPROGRESS),
    _SYS_ERRREF(ESTALE),
    _SYS_ERRREF(EUCLEAN),
    _SYS_ERRREF(ENOTNAM),
    _SYS_ERRREF(ENAVAIL),
    _SYS_ERRREF(EISNAM),
    _SYS_ERRREF(EREMOTEIO),
    _SYS_ERRREF(EDQUOT),
    _SYS_ERRREF(ENOMEDIUM),
    _SYS_ERRREF(EMEDIUMTYPE),
    _SYS_ERRREF(ECANCELED),
    _SYS_ERRREF(ENOKEY),
    _SYS_ERRREF(EKEYEXPIRED),
    _SYS_ERRREF(EKEYREVOKED),
    _SYS_ERRREF(EKEYREJECTED),
    _SYS_ERRREF(EOWNERDEAD),
    _SYS_ERRREF(ENOTRECOVERABLE),
    _SYS_ERRREF(ERFKILL),
    _SYS_ERRREF(EHWPOISON)
};

inline void sys_raise(int code)
{
    if (code <= 0 || code > _SYS_ERRSIZE)
        raise(SIGSEGV);
    else
        espace_raise(_SYS_ERR[code - 1]);
}
